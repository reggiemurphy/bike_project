<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Dublin Bikes</title>
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">

        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">

			<!--Need to read in database station names, lat & long coordinates into three variables-->
			//Set Google Map Properties
			function myMap() {
				var myCenter = new google.maps.LatLng(53.3498,-6.2603);
				var mapCanvas = document.getElementById("googleMap");
				var mapOptions = {center: myCenter, zoom: 12};
				var map = new google.maps.Map(mapCanvas, mapOptions);

				//Set Markers For Stations On Map
				//Start loop here when we have the information read in...
				var marker = new google.maps.Marker({
					position: {lat: 53.3498, lng: -6.2603},
					map: map,});
					google.maps.event.addListener(marker,'click',function() {
						var infowindow = new google.maps.InfoWindow({
						content:"Station information will appear with this click..."
						});
					infowindow.open(map,marker);
					});
				}

            // Load the Visualization API and the ColumnChart package.
            google.load('visualization', '1', {'packages':['corechart']});

            // Set a callback to run when the Google Visualization API is loaded.
            google.setOnLoadCallback(drawChart);

            // Callback that creates and populates a data table,
            // instantiates the chart, passes in the data and
            // draws it.
            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Time', 'Bikes Available', 'Bike Stands'],
                    ['5.00', {{info.bikes}}, {{info.available}}],
                    ['5.30', {{info.bikes}}, {{info.available}}],
                    ['6.00', {{info.bikes}}, {{info.available}}],
                    ['6.30', {{info.bikes}}, {{info.available}}]
            ], false); // False means that the first row contains labels, not data

            var options = {
                title: 'Greek St. Info',
                chartArea: {width: '60%'},
                hAxis: { title: 'Time', minValue: 0 },
                vAxis: { title: 'Bike Numbers' }
            };

            // Create & draw the charts & where they are to be put
            var pie_chart = new google.visualization.PieChart(document.getElementById('daily_chart_div'));
            var bar_chart = new google.visualization.BarChart(document.getElementById('weekly_chart_div'));
            var line_chart = new google.visualization.LineChart(document.getElementById('occupancy_chart_div'));
            pie_chart.draw(data, options);
            bar_chart.draw(data, options);
            line_chart.draw(data, options);
    }
    	</script>
	</head>

    <!--------------------------------------------------------------------------------------------------------->

	<body>
		<h1>Dublin Bikes</h1>
		<div class='left'>
			<div id="daily_chart_div"></div>
            <div id="weekly_chart_div"></div>
            <div id="occupancy_chart_div"></div>
		</div>

		<div class="right">
			<!--Make a container for Google Map API-->
    		<div id="googleMap" style="width:100%;height:600px;"></div>
		</div>
		<!--Google Map API Key-->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkUZsgbKCDZNWjntnPv5mQJplie2G4h64&callback=myMap"></script>
	</body>
</html>
